@using bugTracker.Helpers
@using bugTracker.Extensions
@using Microsoft.AspNet.Identity;

@{
    DashBoardHelper dashBoardHelper = new DashBoardHelper();
}
<!-- page content -->

<div class="row top_tiles">
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-ticket"></i></div>
            <div class="count">@dashBoardHelper.TicketCount()</div>
            <h3>Total Ticket Count</h3>
            <p></p>
        </div>
    </div>
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-briefcase"></i></div>
            <div class="count">@dashBoardHelper.ProjectCount()</div>
            <h3>Total Projects</h3>
            <p></p>
        </div>
    </div>
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-ticket"></i></div>
            <div class="count">@dashBoardHelper.TicketCountForUser(User.Identity.GetUserId())</div>
            <h3>Tick(s) for User</h3>
            <p></p>
        </div>
    </div>
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-briefcase"></i></div>
            <div class="count">@dashBoardHelper.ProjectCountForUser(User.Identity.GetUserId())</div>
            <h3>Project(s) for User</h3>
            <p></p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="x_panel">
            <div class="x_title">
                <h2>Last 10 Tickets</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li>
                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                @foreach (var ticket in dashBoardHelper.MostRecentTickets())
                {
                    <article class="media event">
                        <a class="pull-left date">
                            <p class="month">@ticket.Created.ToString("MMM")</p>
                            <p class="day">@ticket.Created.ToString("dd")</p>
                        </a>
                        <div class="media-body">
                            <a class="title" href="#">@ticket.Title</a>
                            <p>@ticket.Description</p>
                        </div>
                    </article>
                }
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="x_panel">
            <div class="x_title">
                <h2>Last 10 Projects</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li>
                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                @foreach (var project in dashBoardHelper.MostRecentProjects())
                {
                    <article class="media event">
                        <a class="pull-left date">
                            <p class="month">@project.Created.ToString("MMM")</p>
                            <p class="day">@project.Created.ToString("dd")</p>
                        </a>
                        <div class="media-body">
                            <a class="title" href="#">@project.Name</a>
                            <p>@project.Details</p>
                        </div>
                    </article>
                }
            </div>
        </div>
    </div>
</div>
<!-- /page content -->